% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/survivalHelpers.R
\name{defineExposedCohortForPair}
\alias{defineExposedCohortForPair}
\title{Define Exposed Cohort for a Specific Exposure-Outcome Pair}
\usage{
defineExposedCohortForPair(
  cohortBaseForOutcome,
  allConditionFirstDates,
  outcomeDatesCurrentOutcome,
  exposureId,
  outcomeId,
  washoutYears,
  session = NULL
)
}
\arguments{
\item{cohortBaseForOutcome}{A tibble representing the cohort that has already
passed the outcome-specific washout, as returned by \code{filterByWashoutAndGetOutcomeDates}.}

\item{allConditionFirstDates}{A tibble containing first occurrence dates for
all relevant concept IDs, as returned by \code{fetchDataForSurvAnalysis}.}

\item{outcomeDatesCurrentOutcome}{A tibble with \code{person_id} and \code{outcome_date}
for the specific outcome being analyzed in the current loop iteration.}

\item{exposureId}{The numeric concept ID of the exposure condition.}

\item{outcomeId}{The numeric concept ID of the outcome condition.}

\item{washoutYears}{The washout period in years. Exposure must occur on or after
\code{obs_start_date + washoutYears}.}

\item{session}{Optional. The Shiny session object.}
}
\value{
A list containing:
\describe{
\item{exposed}{A tibble defining the exposed cohort for this pair. Contains unique exposure events (\code{exposed_person_id}, \code{index_date}, \code{year_of_birth}, \code{gender_concept_id}) meeting the criteria.}
\item{exposureDates}{A tibble with \code{person_id} and \code{exposure_date} (first occurrence) for the specific \code{exposureId} among the \code{cohortBaseForOutcome}.}
}
Returns \code{NULL} for \code{exposed} if no valid exposed individuals are found or
\code{NULL}for both \code{exposed} and \code{exposureDates} if \code{cohortBaseForOutcome} is null or empty
}
\description{
Identifies individuals exposed to a specific condition (\code{exposureId}) from a
base cohort (already filtered by outcome washout), ensuring their exposure
occurs AFTER the specified washout period relative to observation start,
and BEFORE any occurrence of the specified outcome condition (\code{outcomeId}).
Returns the filtered exposed cohort table and their exposure dates.
}
\keyword{internal}
