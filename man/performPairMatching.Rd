% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/survivalHelpers.R
\name{performPairMatching}
\alias{performPairMatching}
\title{Perform Incidence Density Matching for an Exposure-Outcome Pair}
\usage{
performPairMatching(
  exposedCohortDefinition,
  controlsPoolBaseOutcome,
  exposureDatesCurrentExposure,
  matchRatio,
  exposureId,
  outcomeId,
  session = NULL
)
}
\arguments{
\item{exposedCohortDefinition}{A tibble of exposed individuals eligible for
matching, as returned by \code{defineExposedCohortForPair}. Must contain
\code{exposed_person_id}, \code{index_date}, \code{year_of_birth}, \code{gender_concept_id}.}

\item{controlsPoolBaseOutcome}{A tibble representing the potential control
pool (passed outcome washout), containing \code{person_id}, \code{year_of_birth},
\code{gender_concept_id}, \code{obs_start_date}, \code{obs_end_date}, and potentially \code{outcome_date}.}

\item{exposureDatesCurrentExposure}{A tibble containing \code{person_id} and
\code{exposure_date} for the specific exposure being matched.}

\item{matchRatio}{The target number of controls to match to each exposed person.}

\item{exposureId}{The numeric concept ID of the exposure (for notifications).}

\item{outcomeId}{The numeric concept ID of the outcome (for notifications).}

\item{session}{Optional. The Shiny session object.}
}
\value{
A list containing:
\describe{
\item{matchedData}{A tibble containing the matched sets. Includes \code{person_id}, \code{exposure_status} (1 for exposed, 0 for control), \code{index_date} (from the matched exposed person), and \code{set_id} (linking members of a matched set).}
\item{nMatchedExposed}{The number of exposed individuals for whom at least one control was successfully matched.}
}
Returns \code{NULL} for \code{matchedData} if no matched sets could be created.
}
\description{
Matches unexposed controls to exposed individuals based on incidence density
sampling principles. Matching is performed on gender (exact) and age
(nearest neighbor based on year of birth) within the risk set at the
exposed individual's index date. Controls must be free of both the specific
exposure and outcome prior to the index date.
}
\keyword{internal}
